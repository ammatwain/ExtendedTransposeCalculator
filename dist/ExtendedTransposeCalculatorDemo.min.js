!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("opensheetmusicdisplay")):"function"==typeof define&&define.amd?define(["opensheetmusicdisplay"],t):"object"==typeof exports?exports.ExtendedTransposeCalculator=t(require("opensheetmusicdisplay")):e.ExtendedTransposeCalculator=t(e.opensheetmusicdisplay)}(this,(e=>(()=>{"use strict";var t={306:function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){void 0===n&&(n=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,o)}:function(e,t,s,n){void 0===n&&(n=s),e[n]=t[s]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&n(t,e,s);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Package=void 0;const a=i(s(147));t.Package=a},223:function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){void 0===n&&(n=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,o)}:function(e,t,s,n){void 0===n&&(n=s),e[n]=t[s]}),o=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||n(t,e,s)};Object.defineProperty(t,"__esModule",{value:!0}),o(s(306),t)},315:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ETC=void 0;const n=s(223);class o{static computeKeyRelation(e,t){return e=o.keyToMajorKey(e),(t=o.keyToMajorKey(t))-e}static recoverTransposedKey(e,t){return e=o.keyToMajorKey(e),o.keyToMajorKey(t+e)}static extendedEuclidean(e,t){if(0===t)return[e,1,0];const[s,n,i]=o.extendedEuclidean(t,e%t);return[s,i,n-Math.floor(e/t)*i]}static findInverse(e,t){const s=o.extendedEuclidean(e,t);if(1!==s[0])return-1;let n=s[1]%t;return n<0&&(n=(n+t)%t),n}static keyPrimitiveOrigin(e){return(e%7+7)%7}static keyFundamentalNote(e){return o.fifhtyLeapNotes[o.keyPrimitiveOrigin(e)]}static keyAlterations(e){return Math.floor((e-o.keyPrimitiveOrigin(e))/7)||0}static commaToDegree(e,t=0){return e-o.keyToComma(t)}static commaToCommaProximity(e,t){const s={from:e,to:t,distanceUp:0,distanceDown:0,closest:e,up:t,down:t,closestIs:"up"};return e!==t&&(t>e?(s.up=t,s.down=t-o.octaveSize):(s.up=t+o.octaveSize,s.down=t),s.distanceUp=Math.abs(s.from-s.up),s.distanceDown=Math.abs(s.from-s.down),s.distanceUp<=s.distanceDown?s.closest=s.up:(s.closest=s.down,s.closestIs="down")),s}static get KeyChromaticFactor(){return o.keyChromaticFactor}static get KeyDiatonicFactor(){return o.keyDiatonicFactor}static get OctaveSize(){return o.octaveSize}static commaToDrawablePitch(e){let t;do{t=o.commaToPitch(e),t.alterations<-3?e++:t.alterations>3&&e--}while(Math.abs(t.alterations)>3);return t}static commaToKey(e){let t=Math.floor(e/o.octaveSize);e=(e%o.octaveSize+o.octaveSize)%o.octaveSize,o.commasAboveOctave.indexOf(e)>=0?t--:o.commasBelowOctave.indexOf(e)>=0&&t++;let s=e*o.multiplicativeInverseOfCommaFifhRespectToCommaOctave%o.octaveSize;s>o.commaOctaveHighKey&&(s-=o.octaveSize);let n=s;for(;n<o.minDrawableKey;)n+=12;for(;n>o.maxDrawableKey;)n-=12;return o.keysAboveOctave.indexOf(s)>=0?o.keysAboveOctave.indexOf(n)<0&&t++:o.keysBelowOctave.indexOf(s)>=0&&o.keysBelowOctave.indexOf(n)<0&&t--,s=n,t*o.octaveSize+s}static commaToPitch(e){const t=(e%7+7)%7,s=o.fundamentalDescendingCommas[t],n=o.fundamentalDescendingNotes[t];let i=Math.floor(e/o.octaveSize),a=(e-(i*o.octaveSize+s))/7;return a<-5?(a+=11,i--):a>5&&(a-=11,i++),{fundamentalNote:n,alterations:a,octave:i}}static chromaticSemitone(e){return o.chromaticSemitones[(e%12+12)%12]}static degreeToPitch(e,t=0){return o.commaToPitch(o.keyToComma(t+e))}static diatonicSemitone(e){return o.diatonicSemitones[(e%12+12)%12]}static keyToKeyProximity(e,t,s=!1){const n=o.commaToCommaProximity(o.keyToComma(e),o.keyToComma(t));return!0===s&&(38===n.distanceUp&&39===n.distanceDown&&"up"===n.closestIs?n.closestIs="down":39===n.distanceUp&&38===n.distanceDown&&"down"===n.closestIs&&(n.closestIs="up")),n}static keyToPitch(e){const t=o.keyOctave(e);e-=t*o.octaveSize;let s=o.keyFundamentalNote(e),n=o.keyAlterations(e)%12;return n>6&&(n-=12),6===s&&(s--,n++),{fundamentalNote:s,octave:t,alterations:n}}static keyOctave(e){return Math.floor((e+o.commaOctaveLowKey)/o.octaveSize)||0}static keyToComma(e){let t=Math.floor((e+o.commaOctaveLowKey)/o.octaveSize);const s=(e*o.commaFifhtyLeap%o.octaveSize+o.octaveSize)%o.octaveSize;return o.commasAboveOctave.indexOf(s)>=0?t++:o.commasBelowOctave.indexOf(s)>=0&&t--,t*o.octaveSize+s}static pitchToComma(e={fundamentalNote:0,octave:0,alterations:0}){return e.octave*o.octaveSize+Math.round(o.octaveSize/12*e.fundamentalNote)+7*e.alterations}static pitchToDegree(e={fundamentalNote:0,octave:0,alterations:0},t=0){return o.commaToDegree(o.pitchToComma(e),t)}static pitchToKey(e={fundamentalNote:0,octave:0,alterations:0}){const t=o.fundamentalAscendingNotes.indexOf(e.fundamentalNote),s=e.octave;let n=t+7*e.alterations;return n+=s*o.octaveSize,n}static get FundamentalNotes(){return o.fundamentalAscendingNotes}static get FundamentalCommas(){return o.fundamentalAscendingCommas}static keyToMajorKey(e){return(e%=12)<-7?e+=12:e>7&&(e-=12),e||0}static keyToSimplifiedMajorKey(e){return(e%=12)<-5?e+=12:e>6&&(e-=12),e||0}static get Version(){return o.version}}t.ETC=o,o.version=n.Package.version,o.fifhtyLeapNotes=[0,7,2,9,4,11,6],o.fundamentalAscendingNotes=[0,2,4,5,7,9,11],o.fundamentalDescendingNotes=[0,11,9,7,5,4,2],o.fundamentalAscendingCommas=[0,13,26,32,45,58,71],o.fundamentalDescendingCommas=[0,71,58,45,32,26,13],o.octaveSize=77,o.commaOctaveLowKey=36,o.commaOctaveHighKey=40,o.commaFifhtyLeap=45,o.multiplicativeInverseOfCommaFifhRespectToCommaOctave=o.findInverse(o.commaFifhtyLeap,o.octaveSize),o.minDrawableKey=-22,o.maxDrawableKey=26,o.keysAboveOctave=[12,24,36,19,31,26,38,33,40],o.commasAboveOctave=[1,2,3,8,9,15,16,22,29],o.keysBelowOctave=[-28,-33,-21,-26,-14,-31,-19,-7,-24,-12,-35,-36],o.commasBelowOctave=[49,55,56,62,63,68,69,70,75,76,42,74],o.keyChromaticFactor=7,o.keyDiatonicFactor=-5,o.commaIntervals={perfectOctaveAscending:77,diminishedOctaveAscending:70,augmentedSeventhAscending:78,majorSeventhAscending:71,minorSeventhAscending:64,diminishedSeventhAscending:57,augmentedSixthAscending:65,majorSixthAscending:58,minorSixthAscending:51,diminishedSixthAscending:44,augmentedFifthAscending:52,perfectFifthAscending:45,diminishedFifthAscending:38,augmentedFourthAscending:39,perfectFourthAscending:32,diminishedFourthAscending:25,augmentedThirdAscending:33,majorThirdAscending:26,minorThirdAscending:19,diminishedThirdAscending:10,augmentedSecondAscending:20,majorSecondAscending:13,minorSecondAscending:6,diminishedSecondAscending:-1,augmentedUnisonAscending:7,perfectUnison:0,augmentedUnisonDescending:-7,diminishedSecondDescending:1,minorSecondDescending:-6,majorSecondDescending:-13,augmentedSecondDescending:-20,diminishedThirdDescending:-10,minorThirdDescending:-19,majorThirdDescending:-26,augmentedThirdDescending:-33,diminishedFourthDescending:-25,perfectFourthDescending:-32,augmentedFourthDescending:-39,diminishedFifthDescending:-38,perfectFifthDescending:-45,augmentedFifthDescending:-52,diminishedSixthDescending:-44,minorSixthDescending:-51,majorSixthDescending:-58,augmentedSixthDescending:-65,diminishedSeventhDescending:-57,minorSeventhDescending:-64,majorSeventhDescending:-71,diminishedOctaveDescending:-70,perfectOctaveDescending:-77},o.diatonicSemitones=[o.commaIntervals.perfectUnison,o.commaIntervals.minorSecondAscending,o.commaIntervals.majorSecondAscending,o.commaIntervals.minorThirdAscending,o.commaIntervals.majorThirdAscending,o.commaIntervals.perfectFourthAscending,o.commaIntervals.diminishedFifthAscending,o.commaIntervals.perfectFifthAscending,o.commaIntervals.minorSixthAscending,o.commaIntervals.majorSixthAscending,o.commaIntervals.minorSeventhAscending,o.commaIntervals.majorSeventhAscending],o.chromaticSemitones=[o.commaIntervals.perfectUnison,o.commaIntervals.augmentedUnisonAscending,o.commaIntervals.majorSecondAscending,o.commaIntervals.augmentedSecondAscending,o.commaIntervals.majorThirdAscending,o.commaIntervals.perfectFourthAscending,o.commaIntervals.augmentedFourthAscending,o.commaIntervals.perfectFifthAscending,o.commaIntervals.augmentedFifthAscending,o.commaIntervals.majorSixthAscending,o.commaIntervals.augmentedSixthAscending,o.commaIntervals.majorSeventhAscending]},623:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExtendedTransposeCalculator=void 0;const n=s(646),o=s(315),i=s(104);t.ExtendedTransposeCalculator=class{constructor(e=void 0){this.osmd=void 0,this.Options=void 0,this.osmd=e,this.Options=new i.TransposeOptions(this.osmd),this.test()}test(){for(let e=-7;e<=7;e++)for(let t=-7;t<=7;t++){const s=o.ETC.computeKeyRelation(e,t),n=o.ETC.recoverTransposedKey(e,s);n!==t&&console.log(`${t} ,${n} (${e},${s})`)}}get MainKey(){return this.osmd&&this.osmd.GraphicSheet&&this.osmd.GraphicSheet.GetMainKey().keyTypeOriginal||0}pitchToComma(e){return o.ETC.pitchToComma({fundamentalNote:Number(e.FundamentalNote),alterations:Math.trunc(n.Pitch.HalfTonesFromAccidental(e.Accidental)),octave:e.Octave})}pitchToDegree(e,t){return e.AccidentalXml,o.ETC.pitchToDegree({fundamentalNote:Number(e.FundamentalNote),alterations:Math.trunc(n.Pitch.HalfTonesFromAccidental(e.Accidental)),octave:e.Octave},t)}commaToPitch(e){const t=o.ETC.commaToDrawablePitch(e);return new n.Pitch(t.fundamentalNote,t.octave,n.Pitch.AccidentalFromHalfTones(t.alterations))}transposePitch(e,t,s){if(s=Math.trunc(s),this.Options.TransposeByKeyRelation&&(s=o.ETC.recoverTransposedKey(this.MainKey,s)),this.Options.TransposeByDiatonic){const s=this.pitchToDegree(e,t.keyTypeOriginal),i=o.ETC.FundamentalNotes.indexOf(e.FundamentalNote),a=o.ETC.FundamentalNotes[(i+t.isTransposedBy%7+7)%7],r=Math.floor((i+t.isTransposedBy)/7),c=o.ETC.FundamentalCommas.indexOf((s%o.ETC.OctaveSize+o.ETC.OctaveSize)%o.ETC.OctaveSize);if(c>=0){const s=o.ETC.FundamentalCommas[(c+t.isTransposedBy%7+7)%7],i=o.ETC.commaToPitch(o.ETC.keyToComma(t.Key)+s);return new n.Pitch(i.fundamentalNote,e.Octave+r,n.Pitch.AccidentalFromHalfTones(i.alterations))}return new n.Pitch(a,e.Octave+r,e.Accidental)}if(this.Options.KeySignaturesIsRemoved)return e;if(this.Options.KeySignaturesIsTransposed){const s=this.pitchToDegree(e,t.keyTypeOriginal);return this.commaToPitch(s+t.isTransposedBy)}{const n=this.pitchToComma(e);if(this.Options.TransposeByKey||this.Options.TransposeByKeyRelation){const s=this.pitchToDegree(e,t.keyTypeOriginal);return this.commaToPitch(s+t.isTransposedBy)}if(this.Options.TransposeByInterval){const s=this.pitchToComma(e);return this.commaToPitch(s+t.isTransposedBy)}{let e=Math.floor(s/12)*o.ETC.OctaveSize;return t.Key<0?e+=o.ETC.chromaticSemitone(s):e+=o.ETC.diatonicSemitone(s),this.commaToPitch(n+e)}}}transposeKey(e,t){if(t=Math.trunc(t),this.Options.TransposeByKeyRelation&&(t=o.ETC.recoverTransposedKey(this.MainKey,t)),this.Options.TransposeByKey||this.Options.TransposeByKeyRelation){const s=o.ETC.keyToMajorKey(t);e.Key=o.ETC.keyToMajorKey(s-this.MainKey+e.keyTypeOriginal),e.isTransposedBy=o.ETC.keyToKeyProximity(e.keyTypeOriginal,e.Key)[this.Options.TransposeDirection]+this.Options.TransposeOctave*o.ETC.OctaveSize,this.Options.KeySignaturesIsTransposed||(e.Key=e.keyTypeOriginal)}else if(this.Options.KeySignaturesIsTransposed&&this.Options.TransposeByInterval){const s=Math.floor(t/12),n=(t%12+12)%12;e.Key=t%12!=0?o.ETC.keyToMajorKey(e.keyTypeOriginal+n*o.ETC.KeyDiatonicFactor):e.keyTypeOriginal,e.isTransposedBy=o.ETC.keyToKeyProximity(e.keyTypeOriginal,e.Key).up+s*o.ETC.OctaveSize}else if(this.Options.KeySignaturesIsTransposed&&this.Options.TransposeByHalftone){const s=Math.floor(t/12),n=(t%12+12)%12;0!==t?e.keyTypeOriginal>=0?e.Key=o.ETC.keyToSimplifiedMajorKey(e.keyTypeOriginal+n*o.ETC.KeyDiatonicFactor):e.Key=o.ETC.keyToSimplifiedMajorKey(e.keyTypeOriginal+n*o.ETC.KeyChromaticFactor):e.Key=e.keyTypeOriginal,e.isTransposedBy=o.ETC.keyToKeyProximity(e.keyTypeOriginal,e.Key).up+s*o.ETC.OctaveSize}else this.Options.KeySignaturesIsRemoved?(e.Key=0,e.isTransposedBy=0):(e.Key=e.keyTypeOriginal,e.isTransposedBy=t);e.Mode=0}}},104:(e,t,s)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TransposeOptions=void 0;const o=s(315);class i{constructor(e=void 0){this.transposeType=i.transposeByHalftone,this.keySignatures=i.keySignaturesIsTransposed,this.osmd=void 0,this.transposeDirection="up",this.transposeOctave=0,this.osmd=e}static calculatePrecision(){let e=1,t=1;for(;1+t!==1;)e*=.1,t*=.1;return e}set Transpose(e){this.osmd.Sheet.Transpose=i.precision+e}get OSMD(){return this.osmd||void 0}set OSMD(e){this.osmd=e}get MainKey(){return this.osmd&&this.osmd.GraphicSheet&&this.osmd.GraphicSheet.GetMainKey().keyTypeOriginal||0}get TransposeType(){return this.transposeType}get KeySignatures(){return this.keySignatures}get KeySignaturesIsTransposed(){return this.keySignatures===i.keySignaturesIsTransposed}set KeySignaturesIsTransposed(e){Boolean(e)&&(this.keySignatures=i.keySignaturesIsTransposed)}get KeySignaturesIsFixed(){return this.keySignatures===i.keySignaturesIsFixed}set KeySignaturesIsFixed(e){Boolean(e)&&(this.keySignatures=i.keySignaturesIsFixed)}get KeySignaturesIsRemoved(){return this.keySignatures===i.keySignaturesIsRemoved}set KeySignaturesIsRemoved(e){Boolean(e)&&(this.keySignatures=i.keySignaturesIsRemoved)}get TransposeByHalftone(){return!this.osmd||this.transposeType===i.transposeByHalftone}set TransposeByHalftone(e){Boolean(e)&&(this.transposeType=i.transposeByHalftone)}get TransposeByDiatonic(){return this.transposeType===i.transposeByDiatonic}set TransposeByDiatonic(e){this.transposeType=Boolean(e)?i.transposeByDiatonic:i.transposeByHalftone}get TransposeByInterval(){return this.transposeType===i.transposeByInterval}set TransposeByInterval(e){this.transposeType=Boolean(e)?i.transposeByInterval:i.transposeByHalftone}get TransposeByKey(){return this.osmd&&this.transposeType===i.transposeByKey}set TransposeByKey(e){this.transposeType=Boolean(e)?i.transposeByKey:i.transposeByHalftone}get TransposeByKeyRelation(){return this.osmd&&this.transposeType===i.transposeByKeyRelation}set TransposeByKeyRelation(e){this.transposeType=Boolean(e)?i.transposeByKeyRelation:i.transposeByHalftone}get TransposeOctave(){return this.transposeOctave}set TransposeOctave(e){this.transposeOctave=Number(e)}get TransposeDirection(){return this.transposeDirection}set TransposeDirection(e){this.transposeDirection=e}transposeToHalftone(e,t=i.keySignaturesIsTransposed){this.keySignatures=t,e=Number(e),this.TransposeByHalftone=!0,this.Transpose=e}transposeToKey(e,t=0,s=i.keySignaturesIsTransposed){this.keySignatures=s,e=Number(e),t=Number(t),this.TransposeByKey=!0,this.TransposeOctave=t,this.TransposeDirection=o.ETC.keyToKeyProximity(this.MainKey,e,!0).closestIs,this.Transpose=e}transposeToKeyRelation(e,t=0,s=i.keySignaturesIsTransposed){this.keySignatures=s,this.TransposeByKeyRelation=!0,e=Number(e),t=Number(t),this.TransposeOctave=t,this.TransposeDirection=o.ETC.keyToKeyProximity(this.MainKey,e,!0).closestIs;const n=o.ETC.computeKeyRelation(this.MainKey,e);this.Transpose=n}transposeToInterval(e,t=i.keySignaturesIsTransposed){if(this.keySignatures=t,e=Number(e),this.TransposeByInterval=!0,this.KeySignaturesIsTransposed){const t=o.ETC.commaToPitch(e);e=12*t.octave+t.fundamentalNote+t.alterations,this.Transpose=e}else this.Transpose=e}transposeToDiatonic(e){this.KeySignaturesIsFixed=!0,e=Number(e),this.TransposeByDiatonic=!0,this.Transpose=Number(e)}removeKeySignatures(){this.KeySignaturesIsRemoved=!0,this.Transpose=0}}t.TransposeOptions=i,n=i,i.precision=n.calculatePrecision(),i.transposeByHalftone=0,i.transposeByDiatonic=1,i.transposeByInterval=2,i.transposeByKey=3,i.transposeByKeyRelation=4,i.keySignaturesIsTransposed=0,i.keySignaturesIsFixed=1,i.keySignaturesIsRemoved=2},179:function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){void 0===n&&(n=s);var o=Object.getOwnPropertyDescriptor(t,s);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,o)}:function(e,t,s,n){void 0===n&&(n=s),e[n]=t[s]}),o=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||n(t,e,s)};Object.defineProperty(t,"__esModule",{value:!0}),o(s(315),t),o(s(104),t),o(s(623),t)},646:t=>{t.exports=e},147:e=>{e.exports=JSON.parse('{"name":"extended-transpose-calculator","version":"0.2.27","description":"Extended Transpose Calculator Plugin for OpenSheetMusicDisplay","main":"dist/ExtendedTransposeCalculator.min.js","types":"dist/src/index.d.ts","exports":{".":{"require":{"types":"./dist/src/index.d.ts","default":"./dist/ExtendedTransposeCalculator.min.js.js"},"import":{"types":"./dist/src/index.d.ts","default":"./dist/ExtendedTransposeCalculator.min.js.js"}}},"scripts":{"docs":"typedoc --out ./build/docs --name ExtendedTransposeCalculator ./src","eslint":"eslint -c .eslintrc.js --ext .ts .","lint":"npm run eslint","test":"","build":"npm run version-patch && npm-run-all lint build:webpack","build:webpack":"webpack --progress --config webpack.prod.js","build:webpack-dev":"webpack --progress --config webpack.dev.js","build:webpack-sourcemap":"webpack --progress --config webpack.sourcemap.js","start":"webpack-dev-server --progress --config webpack.dev.js","start:local":"webpack-dev-server --progress --config webpack.local.js","version-major":"npx auto-version --major","version-minor":"npx auto-version --minor","version-patch":"npx auto-version --patch"},"pre-commit":["lint"],"files":["dist/dist/src","dist/ExtendedTransposeCalculator.min.js","AUTHORS","LICENSE","README.md"],"repository":{"type":"git","url":"https://github.com/ammatwain/ExtendedTransposeCalculator"},"keywords":["transpose","sheet","music","vexflow","musicxml"],"author":"Amedeo Sorpreso","license":"Apache-2.0","bugs":{"url":"https://github.com/ammatwain/ExtendedTransposeCalculator/issues"},"homepage":"https://github.com/ammatwain/ExtendedTransposeCalculator","dependencies":{"auto-version-js":"^0.3.10","opensheetmusicdisplay":"^1.8.3"},"devDependencies":{"@types/node":"*","@typescript-eslint/eslint-plugin":"^5.5.0","@typescript-eslint/parser":"^5.5.0","chai":"^4.3.4","clean-webpack-plugin":"^4.0.0","copy-webpack-plugin":"^11.0.0","eslint":"^8.45.0","eslint-plugin-import":"^2.27.5","eslint-plugin-jsdoc":"^46.4.5","eslint-plugin-no-null":"^1.0.2","eslint-plugin-node":"^11.1.0","eslint-plugin-standard":"^5.0.0","html-webpack-plugin":"^5.5.0","ncp":"^2.0.0","npm-run-all":"^4.1.5","pre-commit":"^1.2.2","ts-loader":"^9.2.6","typedoc":"^0.22.10","typescript":"^4.5.2","webpack":"^5.64.4","webpack-cli":"^4.9.1","webpack-dev-server":"^4.7.0","webpack-merge":"^5.8.0","webpack-visualizer-plugin2":"^1.0.0"},"config":{}}')}},s={};function n(e){var o=s[e];if(void 0!==o)return o.exports;var i=s[e]={exports:{}};return t[e].call(i.exports,i,i.exports,n),i.exports}var o={};return(()=>{var e=o;Object.defineProperty(e,"__esModule",{value:!0});const t=n(179),s=n(646);let i,a;const r=.66;let c,l,m,u,d,p,h,y,T,g,S,_,v,f,O,M,D=t.TransposeOptions.keySignaturesIsTransposed;const x=[["Bach, J.S. - Preludio e Fuga 3 in Do diesis maggiore (BWV 848)","sheets/JohannSebastianBach_Preludio_e_Fuga_3_in_Do_diesis_maggiore_BWV848.musicxml"],["Bach, J.S. - Preludio e Fuga 8 in Mi bemolle minore (BWV 853)","sheets/JohannSebastianBach_Preludio_e_Fuga_3_in_Mi_bemolle_minore_BWv853.musicxml"],["Bach, J.S. - Praeludium in C-Dur BWV846 1","sheets/JohannSebastianBach_PraeludiumInCDur_BWV846_1.xml"],["Bach, J.S. - Air","sheets/JohannSebastianBach_Air.xml"],["Beethoven, L.v. - An die ferne Geliebte","sheets/Beethoven_AnDieFerneGeliebte.xml"],["Clementi, M. - Sonatina Op.36 No.1 Pt.1","sheets/MuzioClementi_SonatinaOpus36No1_Part1.xml"],["Clementi, M. - Sonatina Op.36 No.1 Pt.2","sheets/MuzioClementi_SonatinaOpus36No1_Part2.xml"],["Clementi, M. - Sonatina Op.36 No.3 Pt.1","sheets/MuzioClementi_SonatinaOpus36No3_Part1.xml"],["Clementi, M. - Sonatina Op.36 No.3 Pt.2","sheets/MuzioClementi_SonatinaOpus36No3_Part2.xml"],["Gounod, C. - MÃ©ditation","sheets/CharlesGounod_Meditation.xml"],["Haydn, J. - Concertante Cello","sheets/JosephHaydn_ConcertanteCello.xml"],["Joplin, S. - Elite Syncopations","sheets/ScottJoplin_EliteSyncopations.xml"],["Joplin, S. - The Entertainer","sheets/ScottJoplin_The_Entertainer.xml"],["Mozart, W.A. - An Chloe","sheets/Mozart_AnChloe.xml"],["Mozart, W.A. - Das Veilchen","sheets/Mozart_DasVeilchen.xml"],["Mozart, W.A. - Clarinet Quintet (Excerpt)","sheets/Mozart_Clarinet_Quintet_Excerpt.mxl"],["Mozart, W.A. - String Quartet in G, K. 387, 1st Mvmt Excerpt","sheets/Mozart_String_Quartet_in_G_K._387_1st_Mvmnt_excerpt.musicxml"],["Mozart/Holzer - Land der Berge (national anthem of Austria)","sheets/Land_der_Berge.musicxml"],["Stress Test Octave Line","sheets/Scale_sixteenth.mxl"],["Stress Test - F Clef & Key","sheets/Stress_Test_F_Clef_and_Key.musicxml"],["Stress Test - Clef & Key","sheets/Stress_Test_Clef_and_Key.musicxml"],["Stress Test - Homophonic Keys - G Clef","sheets/Stress_Test_With_Homophonic_Keys_G_Clef.musicxml"],["Stress Test - Homophonic Keys - F Clef","sheets/Stress_Test_With_Homophonic_Keys_F_Clef.musicxml"],["Stress Test - Homophonic Keys - C Clef","sheets/Stress_Test_With_Homophonic_Keys_C_Clef.musicxml"],["Stress Test - Homophonic Keys - F/C/G Clefs","sheets/Stress_Test_With_Homophonic_Keys_F_C_G_Clef.musicxml"],["Stress Test - Homophonic Keys - G/C/F Clefs","sheets/Stress_Test_With_Homophonic_Keys_G_C_F_Clef.musicxml"],["Stress Test - Key Transpose","sheets/Stress_Test_Key_Transpose.musicxml"],["Stress Test - Diminished Seventh Chords","sheets/Stress_Test_With_Diminished_Seventh_Chords.musicxml"],["OSMD Function Test - All","sheets/OSMD_function_test_all.xml"],["OSMD Function Test - Accidentals","sheets/OSMD_function_test_accidentals.musicxml"],["OSMD Function Test - Autobeam","sheets/OSMD_function_test_autobeam.musicxml"],["OSMD Function Test - Auto-/Custom-Coloring","sheets/OSMD_function_test_auto-custom-coloring-entchen.musicxml"],["OSMD Function Test - Bar lines","sheets/OSMD_function_test_bar_lines.musicxml"],["OSMD Function Test - Chord Symbols","sheets/OSMD_function_test_chord_symbols.musicxml"],["OSMD Function Test - Chord Spacing","sheets/OSMD_function_test_chord_spacing.mxl"],["OSMD Function Test - Chord Symbols - Various Chords","sheets/OSMD_function_test_chord_tests_various.musicxml"],["OSMD Function Test - Chord Symbols - BrookeWestSample","sheets/BrookeWestSample.mxl"],["OSMD Function Test - Color (from XML)","sheets/OSMD_function_test_color.musicxml"],["OSMD Function Test - Container height (compacttight mode)","sheets/OSMD_Function_Test_Container_height.musicxml"],["OSMD Function Test - Drumset","sheets/OSMD_function_test_drumset.musicxml"],["OSMD Function Test - Drums on one Line","sheets/OSMD_Function_Test_Drums_one_line_snare_plus_piano.musicxml"],["OSMD Function Test - Expressions","sheets/OSMD_function_test_expressions.musicxml"],["OSMD Function Test - Expressions Overlap","sheets/OSMD_function_test_expressions_overlap.musicxml"],["OSMD Function Test - Grace Notes","sheets/OSMD_function_test_GraceNotes.xml"],["OSMD Function Test - Metronome Marks","sheets/OSMD_function_test_metronome_marks.mxl"],["OSMD Function Test - Multiple Rest Measures","sheets/OSMD_function_test_multiple_rest_measures.musicxml"],["OSMD Function Test - Invisible Notes","sheets/OSMD_function_test_invisible_notes.musicxml"],["OSMD Function Test - Notehead Shapes","sheets/OSMD_function_test_noteheadShapes.musicxml"],["OSMD Function Test - Ornaments","sheets/OSMD_function_test_Ornaments.xml"],["OSMD Function Test - Pedals","sheets/OSMD_Function_Test_Pedals.musicxml"],["OSMD Function Test - Selecting Measures To Draw","sheets/OSMD_function_test_measuresToDraw_Beethoven_AnDieFerneGeliebte.xml"],["OSMD Function Test - System and Page Breaks","sheets/OSMD_Function_Test_System_and_Page_Breaks_4_pages.mxl"],["OSMD Function Test - Tabulature","sheets/OSMD_Function_Test_Tabulature_hayden_study_1.mxl"],["OSMD Function Test - Tabulature MultiBends","sheets/OSMD_Function_Test_Tablature_Multibends.musicxml"],["OSMD Function Test - Tabulature All Effects","sheets/OSMD_Function_Test_Tablature_Alleffects.musicxml"],["OSMD Function Test - Tremolo","sheets/OSMD_Function_Test_Tremolo_2bars.musicxml"],["OSMD Function Test - Labels","sheets/OSMD_Function_Test_Labels.musicxml"],["OSMD Function Test - High Slur Test","sheets/test_slurs_highNotes.musicxml"],["OSMD Function Test - Auto Multirest Measures Single Staff","sheets/Test_Auto_Multirest_1.musicxml"],["OSMD Function Test - Auto Multirest Measures Multiple Staves","sheets/Test_Auto_Multirest_2.musicxml"],["OSMD Function Test - String number collisions","sheets/test_string_number_collisions.musicxml"],["OSMD Function Test - Repeat Stave Connectors","sheets/OSMD_function_Test_Repeat.musicxml"],["OSMD Function Test - Voice Alignment","sheets/OSMD_Function_Test_Voice_Alignment.musicxml"],["Schubert, F. - An Die Musik","sheets/Schubert_An_die_Musik.xml"],["Actor, L. - Prelude (Large Sample, loading time)","sheets/ActorPreludeSample.xml"],["Actor, L. - Prelude (Large, No Print Part Names)","sheets/ActorPreludeSample_PartName.xml"],["Anonymous - Saltarello","sheets/Saltarello.mxl"],["Debussy, C. - Mandoline","sheets/Debussy_Mandoline.xml"],["Levasseur, F. - Parlez Mois","sheets/Parlez-moi.mxl"],["Schumann, R. - Dichterliebe","sheets/Dichterliebe01.xml"],["Telemann, G.P. - Sonate-Nr.1.1-Dolce","sheets/TelemannWV40.102_Sonate-Nr.1.1-Dolce.xml"],["Telemann, G.P. - Sonate-Nr.1.2-Allegro","sheets/TelemannWV40.102_Sonate-Nr.1.2-Allegro-F-Dur.xml"]];function b(e=""){!function(e=""){e?(console.log("[OSMD demo] error: "+e),m.textContent=e,l.style.display="",u.style.width=u.style.height=String(0),k()):l.style.display="none"}(),C(),d&&(e=d.value),i.load(e).then((function(){return i.zoom=r,i.render()}),(function(e){})).then((function(){a&&a.Options&&(p.value=String(a.Options.MainKey||0)),k()}),(function(e){k()}))}function C(){document.body.style.opacity=String(.3),F("disabled")}function k(){document.body.style.opacity=String(1),F("")}function K(){C(),window.setTimeout((function(){i.IsReadyToRender()?i.render():(console.log("[OSMD demo] Loses context!"),b()),k()}),0)}function F(e){d&&(d.disabled=e)}window.addEventListener("DOMContentLoaded",(e=>{c=document.getElementById("osmd-version"),l=document.getElementById("error-tr"),m=document.getElementById("error-td"),u=document.querySelector("#sheet-container"),d=document.querySelector("#select-sample"),T=document.getElementById("transpose-by-halftones"),g=document.getElementById("transpose-by-halftones-btn"),p=document.querySelector("#transpose-by-key"),h=document.getElementById("transpose-by-key-btn"),y=document.getElementById("transpose-by-key-octave"),S=document.getElementById("transpose-by-interval"),_=document.getElementById("transpose-by-interval-btn"),v=document.getElementById("transpose-key-signatures"),f=document.getElementById("transpose-diatonically"),O=document.getElementById("transpose-diatonically-btn"),M=document.getElementById("remove-key-signatures"),d.addEventListener("change",(e=>{b()})),h&&p&&(h.onclick=function(){const e=Number(p.value),t=Number(y.value);a.Options.transposeToKeyRelation(e,t,D),i.updateGraphic(),K()}),g&&T&&(g.onclick=function(){a.Options.TransposeByHalftone=!0;const e=Number(T.value);a.Options.transposeToHalftone(e,D),i.updateGraphic(),K()}),_&&S&&(_.onclick=function(){const e=t.ETC.commaIntervals[S.value];a.Options.transposeToInterval(e,D),i.updateGraphic(),K()}),v&&(v.onchange=function(){D=Boolean(v.checked)?t.TransposeOptions.keySignaturesIsTransposed:t.TransposeOptions.keySignaturesIsFixed}),O&&f&&(O.onclick=function(){const e=Number(f.value);a.Options.transposeToDiatonic(e),i.updateGraphic(),K()}),M&&(M.onclick=function(){a.Options.removeKeySignatures(),i.updateGraphic(),K()}),x.forEach((e=>{const t=document.createElement("option");t.value=e[1],t.textContent=e[0],d.appendChild(t)})),i=new s.OpenSheetMusicDisplay(u,{autoResize:!0,disableCursor:!1,drawPartNames:!0,drawFingerings:!0,setWantedStemDirectionByXml:!0,useXMLMeasureNumbers:!0,coloringEnabled:!0,autoBeam:!1}),c.innerHTML=`(on OpenSheetMusicDisplay v${i.Version})`,a=new t.ExtendedTransposeCalculator(i),i.TransposeCalculator=a,b()}))})(),o})()));